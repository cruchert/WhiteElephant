<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Secret Santa 2025 â€“ One Link For All</title>
<style>
  body {margin:0; height:100vh; background:#c00; color:white; font-family:Arial, sans-serif; 
        display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center; padding:20px; box-sizing:border-box;}
  h1 {font-size:2.8em; margin:20px 0;}
  input {padding:18px; font-size:1.8em; width:90%; max-width:400px; text-align:center; border-radius:15px; border:none; margin:15px;}
  button {padding:20px 50px; font-size:2em; background:white; color:#c00; border:none; border-radius:20px; cursor:pointer;}
  .big {font-size:4.5em; font-weight:bold; margin:40px 0; line-height:1.3;}
  .small {font-size:1.5em;}
</style>
</head>
<body>

<h1>Secret Santa 2025</h1>

<div id="enterName">
  <p>Type your name exactly as it appears below:</p>
  <input type="text" id="nameInput" placeholder="e.g. Kylie" autocomplete="off">
  <br>
  <button onclick="pick()">Get My Person!</button>
  <p class="small"><strong>Names:</strong> Kylie, Nick, Kendra, Kaedynce, Rylee, Marin, Ellie, Zeke, Rayne, Drea, Brandon, Grandma Lisa, Grandma Chris, Roberto, Diego, JJ</p>
</div>

<div id="result" style="display:none;">
  <p>Hello</p>
  <div class="big" id="personName"></div>
  <p>You are buying a gift for:</p>
  <div class="big" id="target"></div>
  <p class="big">Keep it secret!<br>Merry Christmas</p>
</div>

<script>
// ==== YOUR FAMILY (only edit this if needed) ====
const family = ["Kylie","Nick","Kendra","Kaedynce","Rylee","Marin","Ellie","Zeke","Rayne","Drea","Brandon","Grandma Lisa","Grandma Chris","Roberto","Diego","JJ"];
// ===============================================

const STORAGE_KEY = "SecretSanta2025_OneLink";

let assignments = {};  // Will hold who picks whom
let usedTargets = new Set();  // Who has already been assigned

// Load previous assignments
const saved = localStorage.getItem(STORAGE_KEY);
if (saved) {
  const data = JSON.parse(saved);
  assignments = data.assignments || {};
  usedTargets = new Set(Object.values(assignments));
}

function pick() {
  const input = document.getElementById("nameInput").value.trim();
  const person = family.find(n => n.toLowerCase() === input.toLowerCase());
  
  if (!person) {
    alert("Name not recognized. Check spelling and try again.");
    return;
  }
  
  if (assignments[person]) {
    // Already picked before
    document.getElementById("personName").textContent = person;
    document.getElementById("target").textContent = assignments[person];
    document.getElementById("enterName").style.display = "none";
    document.getElementById("result").style.display = "block";
    return;
  }

  // Find available targets (not themselves and not taken)
  const available = family.filter(name => 
    name !== person && !usedTargets.has(name)
  );

  if (available.length === 0) {
    alert("All names have been taken! Everyone has their person.");
    return;
  }

  // Pick random from available
  const chosen = available[Math.floor(Math.random() * available.length)];
  
  // Save it
  assignments[person] = chosen;
  usedTargets.add(chosen);
  localStorage.setItem(STORAGE_KEY, JSON.stringify({assignments}));

  // Show result
  document.getElementById("personName").textContent = person;
  document.getElementById("target").textContent = chosen;
  document.getElementById("enterName").style.display = "none";
  document.getElementById("result").style.display = "block";
}
</script>
</body>
</html>